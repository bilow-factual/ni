Metaprogramming constructs.
These are various things ni uses to simplify configuration.

package ni::meta;

sub defenv {
  my ($env, $default, $doc) = @_;
  my $val = $ENV{'NI_' . uc $env} // $default;
  $val = &$val if ref $val eq 'CODE';
  push @ni::envs, {name => $env, default => $default, doc => $doc, val => $val};
  *{"ni::conf::$env"} = sub {$val};
}
