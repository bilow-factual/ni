#!/bin/bash

# Step 1: (optionally) build the bootstrap compiler and use it to build the
# self-hosting one.
if [[ $1 == '--boot' ]]; then
  shift
  rm -rf gen
  mkdir -p gen

  { echo '#!/usr/bin/env perl'
    cat src/boot-compiler.pl
  } > gen/nb0
  chmod 0500 gen/nb0
fi

if [[ $1 == '--repl' ]]; then
  gen/nb0 src/coreboot.nc
fi
