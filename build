#!/bin/bash

# Step 1: (optionally) build the bootstrap compiler and use it to build the
# self-hosting one.
if [[ $1 == '--boot' ]]; then
  mkdir -p gen
  { echo '#!/usr/bin/env perl'
    cat src/boot-{parse,cps,macroexpand,globals,main}.pl
  } > gen/nilisp-boot
  chmod +x gen/nilisp-boot

  gen/nilisp-boot src/nilisp-coreboot.ni
fi
